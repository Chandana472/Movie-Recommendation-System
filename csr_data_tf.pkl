import pandas as pd
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.metrics.pairwise import cosine_similarity
import pickle

# Sample movie data (genres or descriptions can be used for the vectorizer)
movies_data = {
    'movie_id': [1, 2, 3],
    'title': ['The Matrix', 'Inception', 'The Dark Knight'],
    'genres': ['Action, Sci-Fi', 'Action, Sci-Fi', 'Action, Thriller'],
}

# Convert to DataFrame
movies_df = pd.DataFrame(movies_data)

# Vectorize the 'genres' or other columns for similarity
tfidf = TfidfVectorizer(stop_words='english')
csr_matrix = tfidf.fit_transform(movies_df['genres'])

# Pickle the sparse matrix
with open('csr_data_tf.pkl', 'wb') as file:
    pickle.dump(csr_matrix, file)

print("csr_data_tf.pkl generated successfully.")
